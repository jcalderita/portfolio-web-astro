---
interface Props {
  language: string;
}

const { language } = Astro.props;
const targetLanguage = language === "es" ? "en" : "es";
const flag = language === "es" ? "ðŸ‡ºðŸ‡¸" : "ðŸ‡ªðŸ‡¸";
const ariaLabel = language === "es" ? "Cambiar a inglÃ©s" : "Switch to Spanish";
const title = language === "es" ? "Cambiar el idioma de la web a inglÃ©s" : "Switch website language to Spanish";
---

<a id="flag-toggle" href={`/${targetLanguage}/`} class="cursor-pointer text-3xl" title={title} aria-label={ariaLabel} data-language={targetLanguage}>
  <span aria-hidden="true">{flag}</span>
</a>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const flagToggle = document.getElementById("flag-toggle");
    if (flagToggle) {
      flagToggle.addEventListener("click", function () {
        const lang = flagToggle.dataset.language;
        document.cookie = `lang=${encodeURIComponent(lang)}; path=/; max-age=31536000`;
      });
    }
  });
</script>
