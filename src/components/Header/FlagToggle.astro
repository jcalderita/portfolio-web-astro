---
import FlagToggleScript from "./FlagToggleScript.astro";

interface Props {
  language: string;
}

const { language } = Astro.props;
const targetLanguage = language === "es" ? "en" : "es";
const flag = language === "es" ? "ðŸ‡ºðŸ‡¸" : "ðŸ‡ªðŸ‡¸";
const ariaLabel = language === "es" ? "Cambiar a inglÃ©s" : "Switch to Spanish";
const title = language === "es" ? "Cambiar el idioma de la web a inglÃ©s" : "Switch website language to Spanish";
const currentPath = Astro.url.pathname;
const url = currentPath.replace(`/${language}/`, `/${targetLanguage}/`).replace(`-${language}`, `-${targetLanguage}`);
---

<a id="flag-toggle" href={url} class="cursor-pointer text-3xl" title={title} aria-label={ariaLabel} data-language={targetLanguage}>
  <span aria-hidden="true">{flag}</span>
</a>

<FlagToggleScript />
